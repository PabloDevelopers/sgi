import{j as r}from"./app-Df5veayY.js";import{u as g,a as f,b as j,F as b,c as F,d as y,o as h,e as S,f as N,g as v,h as C,i as u,s as p,n as x}from"./schemas-zMV0GhfT.js";import{B as q}from"./button-bddDtUc4.js";import{C as k}from"./checkbox-w6_fg0x1.js";import{u as E}from"./use-fetch-C1_ydzno.js";import{s as P}from"./index-D_s7tKFG.js";import{q as Q}from"./index-CMWG4mbA.js";import{r as d}from"./index-BVuFwbu2.js";/* empty css            */import"./label-_pngS9Wj.js";import"./index-uxI_ZVAh.js";import"./input-CWrZlXam.js";import"./x-DL3lmWGp.js";import"./index-CnUqaAtJ.js";import"./index-DZ4gxy77.js";import"./search-DiaEsuBZ.js";import"./loader-circle-DslYdNQN.js";import"./check-BNJZYLXR.js";import"./badge-DDa0ljve.js";import"./index-CYEvDvXU.js";const s=e=>({url:s.url(e),method:"get"});s.definition={methods:["get","head"],url:"/api/security/permissions"};s.url=e=>s.definition.url+Q(e);s.get=e=>({url:s.url(e),method:"get"});s.head=e=>({url:s.url(e),method:"head"});const c=e=>({action:s.url(e),method:"get"});c.get=e=>({action:s.url(e),method:"get"});c.head=e=>({action:s.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});s.form=c;Object.assign(d,d),Object.assign(s,s);const R=h({name:p().min(2).max(255),permissions:u(x()).optional()}),B=h({name:p().min(2).max(255),permissions:u(x()).optional()}),I=[{name:"name",label:"Name",type:"text",placeholder:{create:"Enter Name",edit:"Enter Name"},description:{create:"This is the Name field.",edit:"This is the Name field."}}],O=e=>{const m=E(s().url);return r.jsx(r.Fragment,{children:m.data&&m.data.length>0&&r.jsxs("div",{className:"",children:[r.jsx("h3",{className:"mb-4 font-medium text-lg",children:"Permissions"}),r.jsx(S,{control:e.control,name:"permissions",render:({field:o})=>r.jsx("div",{className:"space-y-6",children:m.data?.map(i=>r.jsxs("div",{children:[r.jsx("h4",{className:"mb-2 font-semibold text-md",children:i.category}),r.jsx("div",{className:"gap-4 grid grid-cols-3",children:i.permissions.map(a=>r.jsxs(N,{className:"flex items-center space-x-2",children:[r.jsx(v,{children:r.jsx(k,{checked:o.value?.includes(a.id),onCheckedChange:t=>{const n=o.value||[];return t?o.onChange([...n,a.id]):o.onChange(n.filter(l=>l!==a.id))}})}),r.jsx(C,{className:"font-normal",children:a.name})]},a.id))})]},i.category))})})]})})},re=({data:e,isEdit:m=!1,onSubmit:o,submitButtonText:i="Submit"})=>{const t=g({resolver:f(m?R:B),defaultValues:{name:e?.name||"",permissions:e?.permissions_ids||[]}}),{handleSubmit:n}=j({onSubmit:o,isEdit:m,entityId:e?.id,entityPath:P().url});return r.jsx(b,{...t,children:r.jsxs("form",{onSubmit:t.handleSubmit(n),className:"space-y-8",children:[r.jsx(F,{ext:O(t),children:I.map(l=>r.jsx(y,{control:t.control,fieldConfig:l,isEdit:m,errors:t.formState.errors},l.name))}),r.jsx(q,{type:"submit",disabled:t.formState.isSubmitting,children:t.formState.isSubmitting?"Saving...":i})]})})};export{re as default};
